<div class="main-wrapper container-fluid p-0 academic-program-wrapper explore-courses-page">
    <div class="banner container-fluid banner-image p-0 bg-white">
        <img src="/themes/custom/athena/images/academic-program.png" class="col-lg-12 col-md-12 d-none d-lg-block d-md-block p-0" alt="Banner image">
        <img src="/themes/custom/athena/images/about-us-mobile-banner.png" class="col-lg-12 col-md-12 d-sm-block d-lg-none d-md-none p-0" alt="Banner image">
        <div class="container carousel-caption text-left pl-0">
            <h1 class="strong text-secondaryColor banner_title"><span class="" style="color:deeppink">Certification</span> programs</h1>
            <div class="text-secondaryColor banner_text">
                Microcredentials and programs allow you to pursue further study in a specialised field. Created or accredited by leading universities, microcredentials are professional credentials designed for you to build in-demand .
            </div>
            <div class="row pt-3">
                <div class="col-md-12">
                    <a class="float-left pt-1" href="{{ portal_url }}/registered-courses#findCourse"><button class="float-left btn academic-btn btn-outline-violet mr-2">See all Courses</button></a>
                    <a class="float-left pt-1" href="{{ portal_url }}/registered-courses#findCourse">See you course levels ></a>
                </div>
            </div>
        </div>
    </div>
    
    <div class="container-fluid academic-bg-wrap pb-3">
        <div class="pt-4 container">
            <div class="how-it-works row">

                <div class="col-md-12 academic-content p-0 pt-4">

                    <!--Find your course heading and Search course Input: START-->
                    <div class="row pb-4 findCourseInput">
                        <div class="col-12 col-md-6 col-lg-8">
                            <h2 class="title">Find Your Course</h2>
                        </div>
                        <div class="col-12 col-md-6 col-lg-4">
                            <div class="row bg-white shadow-sm rounded input-area mr-0">
                                <input id="search" class="col-8" type="text" placeholder="What do you want to learn" /><button onclick="return searchCourseAction(event)" class="col-4 text-right">search <i class="fa fa-search" aria-hidden="true"></i></button>
                            </div>
                        </div>
                    </div>
                    <!--Find your course heading and Search course Input: END-->

                    <!--Multiple Course Selection buttons: START -->
                    <div class="container multiple-selection-courses p-0">
                       <div class="row">
                          <div class="col-12">

                              {% for filter_key, filter_value in filters %}
                                    <button type="button" id="filter_subject_{{ filter_value.id }}" onclick="searchKeyword('{{ filter_value.id }}', '{{ filter_value.subject_area }}')" class="btn">{{ filter_value.subject_area }}</button>
                              {% endfor %}

                          </div>
                         <div class="col-12 selected-courses">
                             <p>Currently Selected: <span class="bold" id="selected_filters"></span></p>
                         </div>
                       </div>
                    </div>
                    <!--Multiple Course Selection buttons: END -->


                    <!--Multiple Course Selection buttons: START -->
                    <div class="container category-area">
                     <div class="row">
                        <div class="col-12 p-0">
                           <nav class="nav">

                              {% for certificate_key, certificate_value in certificates %}
                                    <a id="filter_certificate_{{ certificate_value.id }}" onclick="searchCertificates('{{ certificate_value.id }}')" class="nav-link" aria-current="page" href="javascript:void(0)" ><span>{{ certificate_value.certificate_type_name }}</span></a>
                              {% endfor %}

                            </nav>
                        </div>
                        <input id="selected_keywords" type="hidden"/>
                     </div>
                    
                    <!--Multiple Course Selection buttons: END -->

                    <!--courses List: START-->
                    <div class="row shortterm-courses-area">
                        <div class="col-12 p-0">
                            <div class="shortterm-courses">

                                {% for node in nodes %}
                                <div class="item content" style="display:block;">
                                    <div class="course-item-hover">
                                        <div class="row">
                                            <div class="col-12 social-icons">
                                                <a href="http://www.facebook.com/sharer.php?u={{node.course_url}}" target="_blank"><img src="/themes/custom/athena/images/icons/facebook.svg" /></a>
                                                <a href="http://twitter.com/share?url={{node.course_url}}" target="_blank"><img src="/themes/custom/athena/images/icons/twitter.svg" class="ml-2 mr-2" /></a>
                                                <a href="http://www.linkedin.com/shareArticle?mini=true&url={{node.course_url}}" target="_blank"><img src="/themes/custom/athena/images/icons/linkedin.svg" /></a>
                                            </div>
                                        </div>
                                        <div class="course-details col-12 text-center">
                                            <h3>{{node.label}}</h3>
                                            <div class="course-info">
                                                <p class="small">{{node.field_certified_level}}</p>
                                                {{ node.body|striptags|truncate(100)}}…
                                            </div>
                                            <div class="col-12">
                                                <h4><a target="_blank" href="{{node.course_url}}">More Information ></a></h4>
                                            </div>
                                            <div class="col-12">
                                                <p class="small">{{node.field_students_enrolled}} <em>Students Enrolled</em></p>
                                            </div>
                                            <div class="col-12 button-area"><a target="_blank" href="{{node.course_url}}"><button>Start Now</button></a></div>
                                        </div>
                                    </div>
                                    <div class="course-item">
                                        <div class="row heading m-0">
                                            <div class="col-8">
                                                <h5>{{node.field_certified_level}}</h5>
                                            </div>
                                            <div class="col-4">
                                                <span class="free-text">{{node.field_course_amount}}</span>
                                            </div>
                                        </div>
                                        <div class="image">
                                            <img src="/themes/custom/athena/images/course-image2.png" alt="course-image">
                                        </div>
                                        <div class="course-details">
                                            <h3>{{node.label}}</h3>
                                            <div class="course-info">
                                                {{ node.body|striptags|truncate(100)}}…
                                            </div>
                                            <div class="row rating m-0">
                                                <div class="col-6 p-0">
                                                    <div class="my-rating"></div>
                                                </div>
                                                <div class="col-2 p-0">{{node.field_rating}}</div>
                                            </div>
                                            <div class="col-12 button-area"><a target="_blank" href="{{node.course_url}}"><button>Start Now</button></a></div>
                                        </div>
                                    </div>
                                </div>
                                {% endfor %}
                            </div>
                            <input type="hidden" id="pager" name="pager" value="1" />
                        </div>

                        {% if display_load_more %}
                            <div class="show_more_wrapper col-12 text-center">
                                <button id="showMore" class="btn athena-btn purple-btn"><a href="javascript:void(0)" style="font-weight:initial;color:inherit;text-decoration:none;">Show More</a></button>
                            </div>
                        {% endif %}

                    </div>
                    <!--courses List: END-->
                </div>
            </div>
                <div class="bg-white shadow-lg rounded-md mb-4">
                    {{ get_static_data('earning_a_degree', TRUE)|raw }}
               </div>
            </div>
        </div>
    </div>

    <div class="container-fluid">
        <div class="container p-0">
            <div class="insights-section shawdow-effect">
                <!-- <h1>News & Updates</h1> -->
                <img class="img-heading" src="/themes/custom/athena/images/news-updates.svg" alt="">
                <h2>From Our Insights</h2>
                <h3>We keep you informed and engaged. Blogs on diverse subjects. Candid interviews of students and
                    employees. Reviews of books that can change your life. Testimonials from our satisfied students.
                </h3>
                <div class="section-items">
                    <div class="section-item-one">
                        <div class="section-image">
                            <a href="{{ url('<front>') }}node/{{last_insight[0].id}}"> <img style="padding:8px"
                                    src="{{ file_url(last_insight[0].field_insight_article_image_thum.entity.uri.value)}}"></a>
                            <h4>{{last_insight[0].field_article_insight_type.entity.label}}</h4>
                            <h5>{{ last_insight[0].title.value }}</h5>
                            <p>{{last_insight[0].body.value|striptags|truncate(100)}}…<a
                                    href="{{ url('<front>') }}node/{{last_insight[0].id}}">Read more</a>

                            </p>
                        </div>
                    </div>
                    <div class="section-item-two">
                        <h4>Latest Articles <span><a href="{{ url('<front>') }}/insights/all">View All</a></span></h4>


                        <div class="container pb-4">
                            {% for insightsdata in insig %}
                            <div class="row mb-1">
                                <div class="insight-thumbnail col-md-4 d-flex align-items-center">
                                    <a href="{{ url('<front>') }}node/{{insightsdata.id}}">
                                        <img class="thumbnail img-fluid mx-auto brd-0"
                                            src="{{ file_url(insightsdata.field_insight_article_image_thum.entity.uri.value)}}"></a>
                                </div>
                                <div class="col-md-8">
                                    <p class="strong yellow-txt m-0">{{
                                        insightsdata.field_article_insight_type.entity.label }}</p>
                                    <p><a href="{{ url('<front>') }}node/{{insightsdata.id}}">{{
                                            insightsdata.title.value}}</a></p>
                                </div>
                            </div>
                            {% endfor %}

                            <p class="purple-txt"><a href="/insights/all" class="more-link">VIEW ALL INSIGHTS</a></p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="jquery.star-rating-svg.min.js"></script>

<script type="text/javascript">
    jQuery("#showMore").on('click', function() {
        var pagerVal = jQuery('#pager').val();
        var pager = parseInt(pagerVal);
        pager = pager + 1;
        var endpoint = Drupal.url('shortterm-courses/load-more/' + pager);
        var search_val = jQuery('#search').val();
        Drupal.ajax({
            'url': endpoint,
            'submit': {'search': search_val}
        }).execute();
        jQuery('#pager').val(pager);
        jQuery("#showMore").focus();
    });

    jQuery(".my-rating").starRating({
        emptyColor: 'lightgray',
        hoverColor: '#ffc300',
        activeColor: '#ffc300',
        initialRating: 4.5,
        //strokeColor: '#ffc300',
        //strokeWidth: 6,
        starSize: 20
    });

    function searchCourses(event) {
        if(event.which == 13) {
            searchCourseAction();
        }
    }

    function searchKeyword(id, keyword) {
        // var keywords = '';
        // if (keyword == 'All') {
        //     jQuery('#selected_keywords').val('');
        //     keywords = keyword;
        // }
        // else {
        //     keywords = jQuery('#selected_keywords').val();
        //     if (keywords) {
        //         keywords = keywords + ',' + keyword;
        //     }
        //     else {
        //         keywords = keyword;
        //     }
        //     jQuery('#selected_keywords').val(keywords);
        // }

        // var keywords_arr = keywords.split(',');
        // var uniq = keywords_arr.reduce(function(a,b){
        //     if (a.indexOf(b) < 0 ) a.push(b);
        //     return a;
        //   },[]);

        // var keywords_unique = uniq.toString();

        jQuery('.multiple-selection-courses .btn').removeClass('active');
        jQuery('#filter_subject_' + id).addClass('active');
        jQuery('#search').val('');
        jQuery('#selected_filters').html(keyword);
        jQuery('#selected_keywords').val(id);

        var endpoint = Drupal.url('shortterm-courses/search-data/&subject_area_id=' + id);
        Drupal.ajax({ 'url': endpoint }).execute();
        jQuery('#pager').val('1');
        return false;
    }


    function searchCertificates(id) {
        jQuery('.category-area .nav-link').removeClass('active');
        jQuery('#filter_certificate_' + id).addClass('active');
        jQuery('#search').val('');
        var subject_id = jQuery('#selected_keywords').val();
        if (subject_id) {
            var endpoint = Drupal.url('shortterm-courses/search-data/&subject_area_id=' + subject_id + '&fk_certificate_type_id=' + id);
            Drupal.ajax({ 'url': endpoint }).execute();
            jQuery('#pager').val('1');
            return false;
        }
    }


    function searchCourseAction() {
        var search_val = jQuery('#search').val();
        var endpoint = Drupal.url('shortterm-courses/search-data/&course_name=' + search_val);
        Drupal.ajax({ 'url': endpoint }).execute();
        jQuery('#pager').val('1');
        return false;
    }

</script>

<script type="text/javascript">
/*
    $(document).ready(function(){

        $.expr[':'].icontains = function(a, i, m) {
          return $(a).text().toUpperCase()
              .indexOf(m[3].toUpperCase()) >= 0;
        };

        $( '#search' ).keyup( function() {
            var matches = $('.shortterm-courses' ).find('.content:icontains('+ $( this ).val() +') ' );
            $('.content').not( matches ).slideUp();
            matches.slideDown();
        });

        $(".content").slice(0, 16).show();
        $("#loadMore").on("click", function(e){
            e.preventDefault();
            $(".content:hidden").slice(0, 16).slideDown();
            if($(".content:hidden").length == 0) {
                $("#loadMore").text("No Content").addClass("noContent");
            }
        });
    });
*/
</script>
