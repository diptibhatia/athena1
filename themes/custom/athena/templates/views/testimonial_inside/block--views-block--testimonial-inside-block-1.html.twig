<head>
    <link href='https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/10.0.2/css/intlTelInput.css' rel='stylesheet' type='text/css'>
    </head>

{#
/**
 * @file
 * Default theme implementation to display a block.
 *
 * Available variables:
 * - plugin_id: The ID of the block implementation.
 * - label: The configured label of the block if visible.
 * - configuration: A list of the block's configuration values.
 *   - label: The configured label for the block.
 *   - label_display: The display settings for the label.
 *   - provider: The module or other provider that provided this block plugin.
 *   - Block plugin specific settings will also be stored here.
 * - content: The content of this block.
 * - attributes: array of HTML attributes populated by modules, intended to
 *   be added to the main container tag of this template.
 *   - id: A valid HTML ID and guaranteed unique.
 * - title_attributes: Same as attributes, except applied to the main title
 *   tag that appears in the template.
 * - title_prefix: Additional output populated by modules, intended to be
 *   displayed in front of the main title tag that appears in the template.
 * - title_suffix: Additional output populated by modules, intended to be
 *   displayed after the main title tag that appears in the template.
 *
 * @see template_preprocess_block()
 *
 * @ingroup themeable
 */
#}

<div{{ attributes }}>
  {{ title_prefix }}
  {% if label %}
    <h2{{ title_attributes }}>{{ label }}</h2>
  {% endif %}
  {{ title_suffix }}

  {% block content %}
    {{ content }}
  {% endblock %}
</div>

<div>&nbsp;</div>
<div>&nbsp;</div>


  <div class="forms">               
                <div class="container-fluid p-0 about-us-wrapper form">
                    <div class="course-login-wrapper">
                        <div class="login-details">
                        <form  id="course_speak_to_advisor" method="post">
                            <h3>Speak to an Advisor<span>&nbsp;</span></h3>
                            <p>Not sure if this course is right for you? Fill in your details below and one of our Course Advisors will be in contact to provide you with information you need to make a decision. </p>
                            <div class="login-item names">
                                <div class="name-item">
                                    <p>First Name</p>
                                    <input type="text" id="speak_first_name" name="speak_first_name" placeholder="Firstname">
                                </div>
                                <div class="name-item">
                                    <p>Last Name</p>
                                    <input type="text" id="speak_last_name" name="speak_last_name" placeholder="Lastname">
                                </div>
                            </div>
                            <div class="login-item">
                                <p>Email</p>
                                <input type="email" id="speak_email" name="speak_email" required pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,3}$" placeholder="Enter Email Address">
                            </div>
                            <div class="login-item">
                                <p>Country</p>
                                <select name="ddlCountry" id="speak_country" name="speak_country" class="form-control ">
                              <option value="">Country</option>
                              <option value="1">Afghanistan</option>
                              <option value="2">Albania</option>
                              <option value="3">Algeria</option>
                              <option value="4">American Samoa</option>
                              <option value="5">Andorra</option>
                              <option value="6">Angola</option>
                              <option value="7">Anguilla</option>
                              <option value="8">Antarctica</option>
                              <option value="9">Antigua and Barbuda</option>
                              <option value="10">Argentina</option>
                              <option value="11">Armenia</option>
                              <option value="12">Aruba</option>
                              <option value="13">Australia</option>
                              <option value="14">Austria</option>
                              <option value="15">Azerbaijan</option>
                              <option value="16">Bahamas</option>
                              <option value="17">Bahrain</option>
                              <option value="18">Bangladesh</option>
                              <option value="19">Barbados</option>
                              <option value="20">Belarus</option>
                              <option value="21">Belgium</option>
                              <option value="22">Belize</option>
                              <option value="23">Benin</option>
                              <option value="24">Bermuda</option>
                              <option value="25">Bhutan</option>
                              <option value="26">Bolivia</option>
                              <option value="27">Bosnia and Herzegovina</option>
                              <option value="28">Botswana</option>
                              <option value="29">Bouvet Island</option>
                              <option value="30">Brazil</option>
                              <option value="31">British Indian Ocean Territory</option>
                              <option value="32">Brunei Darussalam</option>
                              <option value="33">Bulgaria</option>
                              <option value="34">Burkina Faso</option>
                              <option value="35">Burundi</option>
                              <option value="36">Cambodia</option>
                              <option value="37">Cameroon</option>
                              <option value="38">Canada</option>
                              <option value="39">Cape Verde</option>
                              <option value="40">Cayman Islands</option>
                              <option value="41">Central African Republic</option>
                              <option value="42">Chad</option>
                              <option value="43">Chile</option>
                              <option value="44">China</option>
                              <option value="45">Christmas Island</option>
                              <option value="46">Cocos (Keeling) Islands</option>
                              <option value="47">Colombia</option>
                              <option value="48">Comoros</option>
                              <option value="49">Congo</option>
                              <option value="50">Congo, Democratic Republic of the Congo</option>
                              <option value="51">Cook Islands</option>
                              <option value="52">Costa Rica</option>
                              <option value="53">Cote D'Ivoire</option>
                              <option value="54">Croatia</option>
                              <option value="55">Cuba</option>
                              <option value="56">Cyprus</option>
                              <option value="57">Czech Republic</option>
                              <option value="58">Denmark</option>
                              <option value="59">Djibouti</option>
                              <option value="60">Dominica</option>
                              <option value="61">Dominican Republic</option>
                              <option value="62">Ecuador</option>
                              <option value="63">Egypt</option>
                              <option value="64">El Salvador</option>
                              <option value="65">Equatorial Guinea</option>
                              <option value="66">Eritrea</option>
                              <option value="67">Estonia</option>
                              <option value="68">Ethiopia</option>
                              <option value="69">Falkland Islands (Malvinas)</option>
                              <option value="70">Faroe Islands</option>
                              <option value="71">Fiji</option>
                              <option value="72">Finland</option>
                              <option value="73">France</option>
                              <option value="74">French Guiana</option>
                              <option value="75">French Polynesia</option>
                              <option value="76">French Southern Territories</option>
                              <option value="77">Gabon</option>
                              <option value="78">Gambia</option>
                              <option value="79">Georgia</option>
                              <option value="80">Germany</option>
                              <option value="81">Ghana</option>
                              <option value="82">Gibraltar</option>
                              <option value="83">Greece</option>
                              <option value="84">Greenland</option>
                              <option value="85">Grenada</option>
                              <option value="86">Guadeloupe</option>
                              <option value="87">Guam</option>
                              <option value="88">Guatemala</option>
                              <option value="89">Guinea</option>
                              <option value="90">Guinea-Bissau</option>
                              <option value="91">Guyana</option>
                              <option value="92">Haiti</option>
                              <option value="93">Heard Island and Mcdonald Islands</option>
                              <option value="94">Holy See (Vatican City State)</option>
                              <option value="95">Honduras</option>
                              <option value="96">Hong Kong</option>
                              <option value="97">Hungary</option>
                              <option value="98">Iceland</option>
                              <option value="99">India</option>
                              <option value="100">Indonesia</option>
                              <option value="101">Iran, Islamic Republic of</option>
                              <option value="102">Iraq</option>
                              <option value="103">Ireland</option>
                              <option value="104">Israel</option>
                              <option value="105">Italy</option>
                              <option value="106">Jamaica</option>
                              <option value="107">Japan</option>
                              <option value="108">Jordan</option>
                              <option value="109">Kazakhstan</option>
                              <option value="110">Kenya</option>
                              <option value="111">Kiribati</option>
                              <option value="112">Korea, Democratic People's Republic of</option>
                              <option value="113">Korea, Republic of</option>
                              <option value="114">Kuwait</option>
                              <option value="115">Kyrgyzstan</option>
                              <option value="116">Lao People's Democratic Republic</option>
                              <option value="117">Latvia</option>
                              <option value="118">Lebanon</option>
                              <option value="119">Lesotho</option>
                              <option value="120">Liberia</option>
                              <option value="121">Libyan Arab Jamahiriya</option>
                              <option value="122">Liechtenstein</option>
                              <option value="123">Lithuania</option>
                              <option value="124">Luxembourg</option>
                              <option value="125">Macao</option>
                              <option value="126">Macedonia, the Former Yugoslav Republic of</option>
                              <option value="127">Madagascar</option>
                              <option value="128">Malawi</option>
                              <option value="129">Malaysia</option>
                              <option value="130">Maldives</option>
                              <option value="131">Mali</option>
                              <option value="132">Malta</option>
                              <option value="133">Marshall Islands</option>
                              <option value="134">Martinique</option>
                              <option value="135">Mauritania</option>
                              <option value="136">Mauritius</option>
                              <option value="137">Mayotte</option>
                              <option value="138">Mexico</option>
                              <option value="139">Micronesia, Federated States of</option>
                              <option value="140">Moldova, Republic of</option>
                              <option value="141">Monaco</option>
                              <option value="142">Mongolia</option>
                              <option value="143">Montserrat</option>
                              <option value="144">Morocco</option>
                              <option value="145">Mozambique</option>
                              <option value="146">Myanmar</option>
                              <option value="147">Namibia</option>
                              <option value="148">Nauru</option>
                              <option value="149">Nepal</option>
                              <option value="150">Netherlands</option>
                              <option value="151">Netherlands Antilles</option>
                              <option value="152">New Caledonia</option>
                              <option value="153">New Zealand</option>
                              <option value="154">Nicaragua</option>
                              <option value="155">Niger</option>
                              <option value="156">Nigeria</option>
                              <option value="157">Niue</option>
                              <option value="158">Norfolk Island</option>
                              <option value="159">Northern Mariana Islands</option>
                              <option value="160">Norway</option>
                              <option value="161">Oman</option>
                              <option value="162">Pakistan</option>
                              <option value="163">Palau</option>
                              <option value="164">Palestinian Territory, Occupied</option>
                              <option value="165">Panama</option>
                              <option value="166">Papua New Guinea</option>
                              <option value="167">Paraguay</option>
                              <option value="168">Peru</option>
                              <option value="169">Philippines</option>
                              <option value="170">Pitcairn</option>
                              <option value="171">Poland</option>
                              <option value="172">Portugal</option>
                              <option value="173">Puerto Rico</option>
                              <option value="174">Qatar</option>
                              <option value="175">Reunion</option>
                              <option value="176">Romania</option>
                              <option value="177">Russian Federation</option>
                              <option value="178">Rwanda</option>
                              <option value="179">Saint Helena</option>
                              <option value="180">Saint Kitts and Nevis</option>
                              <option value="181">Saint Lucia</option>
                              <option value="182">Saint Pierre and Miquelon</option>
                              <option value="183">Saint Vincent and the Grenadines</option>
                              <option value="184">Samoa</option>
                              <option value="185">San Marino</option>
                              <option value="186">Sao Tome and Principe</option>
                              <option value="187">Saudi Arabia</option>
                              <option value="188">Senegal</option>
                              <option value="189">Serbia and Montenegro</option>
                              <option value="190">Seychelles</option>
                              <option value="191">Sierra Leone</option>
                              <option value="192">Singapore</option>
                              <option value="193">Slovakia</option>
                              <option value="194">Slovenia</option>
                              <option value="195">Solomon Islands</option>
                              <option value="196">Somalia</option>
                              <option value="197">South Africa</option>
                              <option value="198">South Georgia and the South Sandwich Islands</option>
                              <option value="240">South Sudan</option>
                              <option value="199">Spain</option>
                              <option value="200">Sri Lanka</option>
                              <option value="201">Sudan</option>
                              <option value="202">Suriname</option>
                              <option value="203">Svalbard and Jan Mayen</option>
                              <option value="204">Swaziland</option>
                              <option value="205">Sweden</option>
                              <option value="206">Switzerland</option>
                              <option value="207">Syrian Arab Republic</option>
                              <option value="208">Taiwan, Province of China</option>
                              <option value="209">Tajikistan</option>
                              <option value="210">Tanzania, United Republic of</option>
                              <option value="211">Thailand</option>
                              <option value="212">Timor-Leste</option>
                              <option value="213">Togo</option>
                              <option value="214">Tokelau</option>
                              <option value="215">Tonga</option>
                              <option value="216">Trinidad and Tobago</option>
                              <option value="217">Tunisia</option>
                              <option value="218">Turkey</option>
                              <option value="219">Turkmenistan</option>
                              <option value="220">Turks and Caicos Islands</option>
                              <option value="221">Tuvalu</option>
                              <option value="222">Uganda</option>
                              <option value="223">Ukraine</option>
                              <option value="224">United Arab Emirates</option>
                              <option value="225">United Kingdom</option>
                              <option value="226">United States</option>
                              <option value="227">United States Minor Outlying Islands</option>
                              <option value="228">Uruguay</option>
                              <option value="229">Uzbekistan</option>
                              <option value="230">Vanuatu</option>
                              <option value="231">Venezuela</option>
                              <option value="232">Viet Nam</option>
                              <option value="233">Virgin Islands, British</option>
                              <option value="234">Virgin Islands, U.s.</option>
                              <option value="235">Wallis and Futuna</option>
                              <option value="236">Western Sahara</option>
                              <option value="237">Yemen</option>
                              <option value="238">Zambia</option>
                              <option value="239">Zimbabwe</option>
                            </select>
                                                        </div>
                            <div class="login-item phone-number">
                                <p>Mobile Number</p>
                                <input type="tel" id="phone" name="phone" placeholder="Enter mobile number">
                                <span id="valid-msg" class="hide">✓ Valid</span>
                                <span id="error-msg" class="hide"></span>
                            </div>


                            <div class="login-item">
                            <p>Choose your Course</p>
                            <select name="course" id="reg_course">
                            <option value="" default="">Select your course</option>
                                {% for nodedata in courses_data %}

                                  <option value="{{nodedata.label}}">{{nodedata.label}}</option>
                                  
                                    {% endfor %}
                            </select>
                        </div>

                            <div class="button">
                             
                            <input type="hidden" id="nid" >
                            <input type="hidden" id="country_code" value="" >
                            
                                <input type="checkbox" class="form-check-input" id="speak_consent" name="speak_consent">
                                <label class="form-check-label txt-12" for="exampleCheck1">I consent to Athena Global Education processing my personal information in accordance with the Athena Global Education Privacy Statement &amp; I agree to receive personalised information and updates about Athena Global Education  courses by phone and email.</label>
                                <button  type="button" id="smo_form_submit">Submit</button>
                            </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.com/libraries/owl-carousel"></script>
<script src="https://cdn.jsdelivr.net/npm/jquery-validation@1.19.2/dist/jquery.validate.min.js"></script>

<script type="text/javascript">
  $(document).ready(function() {


      jQuery("#smo_form_submit").click(function() {
        var msg = '';
        var regex = /^[a-zA-Z_ \.]*$/;

        fname  = jQuery("#speak_first_name").val();

        if(jQuery("#speak_first_name").val() == '') {
          msg += '\n\u2022  Please enter first name';
        }else if(!regex.test(jQuery("#speak_first_name").val())) {
            msg += '\n\u2022  Please enter only alphabets for first name';
        }else if(fname.length < 2 ) {
          msg += '\n\u2022  Please enter atleast 2 characters for first name';
        }else if(fname.length > 16 ) {
          msg += '\n\u2022  Please do not enter more than 16 characters for first name';
        }


        lname  = jQuery("#speak_last_name").val();

        if(jQuery("#speak_last_name").val() == '') {
          msg += '\n\u2022  Please enter last name';
        }else if(!regex.test(jQuery("#speak_last_name").val())) {
            msg += '\n\u2022  Please enter only alphabets for last name';
        }else if(lname.length < 2 ) {
          msg += '\n\u2022  Please enter atleast 2 characters for last name';
        }else if(lname.length > 16 ) {
          msg += '\n\u2022  Last name should not be more than 16 characters';
        }
  
        var email = jQuery("#speak_email").val();
        var regex = /^([a-zA-Z0-9_\.\-\+])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;

        if(email == '') {
          msg += '\n\u2022  Email cannot be empty';
        }else if(!regex.test(email)) {
            msg += '\n\u2022  Invalid Email id';
        }

        var ph_num = jQuery("#phone").val();
        var nid = jQuery("#nid").val();
        var num_len = ph_num.length;

        if(jQuery("#speak_country").val() == '') {
          msg += '\n\u2022  Please select country';
        }

        if(jQuery("#phone").val() == '') {
          msg += '\n\u2022  Phone number cannot be empty';
        }else if(num_len <6 || num_len >15) {
          msg += '\n\u2022  Invalid Phone number';
        }else if(!jQuery('#phone').val().match(/^[0-9]+$/)) {
            msg += '\n\u2022  Invalid Phone number';
        }

        if(jQuery("#reg_course").val() == '') {
          msg += '\n\u2022  Please select course';
        }        

        if(!jQuery("#speak_consent").prop('checked') == true){
           msg += '\n\u2022  Please accept consent terms';
        }

        var countryData = jQuery("#phone").intlTelInput("getSelectedCountryData");
        var iso2 = countryData.iso2;
        jQuery.ajax({
         type: 'GET',
         url: "https://learn.athena.edu/athenaprod/api/country/"+iso2, //Returns ID in body
         async: false, // <<== THAT makes us wait until the server is done.
         success: function(data){
             jQuery( "#country_code" ).val(data);
         },
         error: function() {
             alert("Error Processing your request, please try again after some time")
             return FALSE;
         }
      });

        if(msg == ''){

        var cvalue = jQuery('#speak_country').val();        
        var country = jQuery('#speak_country option[value="'+cvalue+'"]').text();
        
        var dataObj = {
                      'form_id': "Testimonials Inside",
                      'course': jQuery('#reg_course').val(),
                      'fname': jQuery('#speak_first_name').val(),
                      'lname': jQuery('#speak_last_name').val(),
                      'email': jQuery('#speak_email').val(),
                      'phone': jQuery('#phone').val(),
                      'country': country,
                    };

        
      var pathparts = location.pathname.split('/');
      if (location.host == 'localhost') {
          var url = location.origin+'/'+pathparts[1].trim('/')+'/'; 
      }else{
          var url = location.origin; 
      }
  
      jQuery.ajax(url + 'save/contact', {
                        type: 'POST',  // http method
                        contentType: "application/json; charset=utf-8",
                        dataType: "json",
                        data: JSON.stringify(dataObj) ,  // data to submit
                         dataType: 'json',
                        success: function (data, status, xhr) {
                            var txt;
                            window.location.replace(url+'/Contact-Us/confirmation');
                        },
                        error: function (jqXhr, textStatus, errorMessage) {
                                if(jqXhr.status == 200) {
                                  window.location.replace(url+'/Contact-Us/confirmation');

                                }
                        }
                    });


          var mailinfo = {
            'mail': jQuery('#speak_email').val(),
            'fname': jQuery('#speak_first_name').val(),
            'lname': jQuery('#speak_last_name').val(),
            'phone': jQuery('#phone').val(),
            'cid': jQuery('#reg_course').val()
          };
          initiateSendingMail('course_speak_to_advisor', mailinfo);

          jQuery('#speak_first_name').val("");
          jQuery('#speak_last_name').val("");
          jQuery('#speak_email').val("");
          jQuery('#speak_country').val("");
          jQuery('#country').val("");
          jQuery('#phone').val("");
          jQuery('#reg_course').val("");
          jQuery('#speak_consent').prop('checked', false);


          return false;

        }else {
          alert(msg);
          return false;
        }
      });

  });
  //---------------------------------------------



jQuery.validator.addMethod("lettersonly", function(value, element) {

  return this.optional(element) || /^[a-zA-Z_ \.]*$/i.test(value);

}, "Please enter only letters");

jQuery.validator.addMethod("phoneUS", function(phone_number, element) {
    phone_number = phone_number.replace(/\s+/g, "");
    return this.optional(element) || phone_number.length > 9 &&
        phone_number.match(/^(\+?1-?)?(\([2-9]\d{2}\)|[2-9]\d{2})-?[2-9]\d{2}-?\d{4}$/);
}, "Please specify a valid phone number");



jQuery("#course_speak_to_advisor").validate({

        rules: {

            "speak_first_name": {

                required: true,

                minlength: 2,

                maxlength: 16,

                lettersonly: true

            },

            "speak_last_name": {

                required: true,

                minlength: 2,

                maxlength: 16,

                lettersonly: true

            },

            "speak_email": {

                required: true,

                email: true

            },

            "phone": {

                required: true,

                minlength: 10,

                phoneUS: true

            },

        },

        messages: {

            "speak_first_name": {

                required: "Enter first name",

                minlength: jQuery.validator.format("Enter at least {0} characters"),

            },

            "speak_last_name": {

                required: "Enter last name",
                minlength: jQuery.validator.format("Enter at least {0} characters"),

            },


            "speak_email": {

                required: "Please enter an email",

                email: "PLease enter a valid email"

            },


        },

    });


//------------------------------------
</script>
